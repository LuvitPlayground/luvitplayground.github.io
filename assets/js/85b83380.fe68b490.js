"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[2825],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=u(n),h=a,m=d["".concat(l,".").concat(h)]||d[h]||c[h]||i;return n?r.createElement(m,o(o({ref:t},p),{},{components:n})):r.createElement(m,o({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var u=2;u<i;u++)o[u]=n[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},542:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return u},toc:function(){return p},default:function(){return d}});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),o=["components"],s={sidebar_position:2,slug:"/docs/tutorials/http-https"},l="Using the HTTP(S) APIs",u={unversionedId:"documentation/guides/http-https",id:"documentation/guides/http-https",isDocsHomePage:!1,title:"Using the HTTP(S) APIs",description:"In this tutorial, you'll learn how you can create HTTP(S) servers using the callback-based Luvit HTTP API. It also covers using the Coroutine-based HTTP APIs for a different approach. Finally, making HTTP Requests is another common use case that will be explained. After you've mastered all this, we'll use a Lit package to create a HTTP-based REST API that will take care of everything for you.",source:"@site/docs/03-documentation/03-guides/http-https.md",sourceDirName:"03-documentation/03-guides",slug:"/docs/tutorials/http-https",permalink:"/docs/tutorials/http-https",editUrl:"https://github.com/luvit/luvit.io/edit/master/website/docs/03-documentation/03-guides/http-https.md",version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,slug:"/docs/tutorials/http-https"},sidebar:"tutorialSidebar",previous:{title:"How to Start Contributing",permalink:"/docs/guides/how-to-start-contributing"},next:{title:"How to Collaborate",permalink:"/docs/guides/how-to-collaborate"}},p=[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Using the Node-Style APIs",id:"using-the-node-style-apis",children:[]},{value:"Creating HTTPS Servers",id:"creating-https-servers",children:[]},{value:"Using the Coroutine-based APIs",id:"using-the-coroutine-based-apis",children:[]},{value:"HTTP Clients (Requests)",id:"http-clients-requests",children:[]},{value:"Making HTTPS Requests",id:"making-https-requests",children:[]},{value:"REST API (WebLit)",id:"rest-api-weblit",children:[]},{value:"Further Reading",id:"further-reading",children:[]},{value:"Feedback",id:"feedback",children:[]}],c={toc:p};function d(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"using-the-https-apis"},"Using the HTTP(S) APIs"),(0,i.kt)("p",null,"In this tutorial, you'll learn how you can create HTTP(S) servers using the callback-based Luvit HTTP API. It also covers using the Coroutine-based HTTP APIs for a different approach. Finally, making HTTP Requests is another common use case that will be explained. After you've mastered all this, we'll use a Lit package to create a HTTP-based REST API that will take care of everything for you."),(0,i.kt)("p",null,"Please note that the goal of this tutorial isn't to explain all the details; it is to get you started building an app. If you want to learn more about the topics covered, we've included some resources for you to follow, but as always you can (and should) do your own research."),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("p",null,"In order to follow along, you might want to read up on (the basics of) the following concepts first:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol"},"Hypertext Transfer Protocol (HTTP)")," is what we'll be using here to communicate with a server"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Transport_Layer_Security"},"Transport Layer Security")," is a security mechanism used to implement encryption on top of HTTP (this is called ",(0,i.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/HTTPS"},"HTTPS"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Representational_state_transfer"},"Restful State Transfer (REST)")," is an architectural style we'll be using briefly at the end to demonstrate a realistic use case")),(0,i.kt)("p",null,"Don't worry if you aren't very familiar with these topics; Luvit handles most difficulties for you and you can always learn details later."),(0,i.kt)("h2",{id:"using-the-node-style-apis"},"Using the Node-Style APIs"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"luvit")," CLI tool can be used as a scripting platform just like ",(0,i.kt)("inlineCode",{parentName:"p"},"node"),".  This\ncan be used to run lua scripts as standalone servers, clients, or other tools."),(0,i.kt)("p",null,'This simple web server written in Luvit responds with "Hello World" for every\nrequest.'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-lua"},'local http = require(\'http\')\n\nhttp.createServer(function (req, res)\n  local body = "Hello world\\n"\n  res:setHeader("Content-Type", "text/plain")\n  res:setHeader("Content-Length", #body)\n  res:finish(body)\nend):listen(1337, \'127.0.0.1\')\n\nprint(\'Server running at http://127.0.0.1:1337/\')\n')),(0,i.kt)("p",null,"And run this script using ",(0,i.kt)("inlineCode",{parentName:"p"},"luvit"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"> luvit server.lua\nServer running at http://127.0.0.1:1337/\n")),(0,i.kt)("p",null,"This script is a standalone HTTP server, there is no need for Apache or Nginx to\nact as host."),(0,i.kt)("h2",{id:"creating-https-servers"},"Creating HTTPS Servers"),(0,i.kt)("p",null,"TODO: Demonstrate using TLS on top of the above"),(0,i.kt)("h2",{id:"using-the-coroutine-based-apis"},"Using the Coroutine-based APIs"),(0,i.kt)("p",null,"TODO: Demonstrate using coro-http, coro-https"),(0,i.kt)("h2",{id:"http-clients-requests"},"HTTP Clients (Requests)"),(0,i.kt)("p",null,"TODO: Demonstrate making GET, POST, UPDATE etc. requests via the HTTP API"),(0,i.kt)("h2",{id:"making-https-requests"},"Making HTTPS Requests"),(0,i.kt)("p",null,"TODO: Demonstrate using TLS on top of the above"),(0,i.kt)("h2",{id:"rest-api-weblit"},"REST API (WebLit)"),(0,i.kt)("p",null,"Luvit also has a package system that makes it easy to publish and consume\nlibraries."),(0,i.kt)("p",null,"For example, ","[creationix][]"," has made a set of libraries that use coroutines\ninstead of callbacks for async I/O and published these to lit."),(0,i.kt)("p",null,"Using ",(0,i.kt)("inlineCode",{parentName:"p"},"lit")," install ",(0,i.kt)("inlineCode",{parentName:"p"},"creationix/weblit")," to use an express-like framework built\non top of coroutines."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},"> mkdir myapp && cd myapp\n> lit install creationix/weblit\n> vim server.lua\n> luvit server.lua\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"server.lua")," file will contain:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-lua"},'local weblit = require(\'weblit\')\n\nweblit.app\n  .bind({host = "127.0.0.1", port = 1337})\n\n  -- Configure weblit server\n  .use(weblit.logger)\n  .use(weblit.autoHeaders)\n\n  -- A custom route that sends back method and part of url.\n  .route({ path = "/:name"}, function (req, res)\n    res.body = req.method .. " - " .. req.params.name .. "\\n"\n    res.code = 200\n    res.headers["Content-Type"] = "text/plain"\n  end)\n\n  -- Start the server\n  .start()\n')),(0,i.kt)("h2",{id:"further-reading"},"Further Reading"),(0,i.kt)("p",null,"TODO: Performance, Security, Scalability, WebSockets, ... ?"),(0,i.kt)("h2",{id:"feedback"},"Feedback"),(0,i.kt)("p",null,"Was this tutorial helpful? Is something wrong or not very understandable? Please let us know so we can improve it!"))}d.isMDXComponent=!0}}]);